<h1>Carrito</h1>

{{#if cart.products.length}}
  <div class="cart-items">
    {{#each cart.products}}
      <div class="cart-item">
        <h3>{{this.product.title}}</h3>
        <p>Precio: ${{this.product.price}}</p>
        <p>Cantidad: {{this.quantity}}</p>
        <p>Subtotal: ${{multiply this.product.price this.quantity}}</p>
        
        <button onclick="updateQuantity('{{this.product._id}}', {{this.quantity}} - 1)">-</button>
        <button onclick="updateQuantity('{{this.product._id}}', {{this.quantity}} + 1)">+</button>
        <button onclick="removeFromCart('{{this.product._id}}')">Eliminar</button>
      </div>
    {{/each}}
  </div>
  
  <div class="cart-total">
    <h2>Total: ${{cart.total}}</h2>
  </div>
{{else}}
  <p>El carrito está vacío</p>
{{/if}}

<script>
  function updateQuantity(productId, newQuantity) {
    if (newQuantity < 1) {
      removeFromCart(productId);
      return;
    }
    
    fetch('/api/carts/{{cart._id